fn main() {
  let mut a : u64 = 591;
  let mut b : u64 = 393;
  let mut c = 0;
  for _i in 0 .. 40000000 {
    a = (a * 16807) % 2147483647;
    b = (b * 48271) % 2147483647;
    if (a & 65535) == (b & 65535) { c+=1; }
  }
  println!("{}", c);

  a = 591;
  b = 393;
  c = 0;
  for _i in 0 .. 5000000 {
    a = (a * 16807) % 2147483647;
    while a % 4 != 0 {
      a = (a * 16807) % 2147483647;
    }
    b = (b * 48271) % 2147483647;
    while b % 8 != 0 {
      b = (b * 48271) % 2147483647;
    }
    if (a & 65535) == (b & 65535) { c+=1; }
  }
  println!("{}", c);
}
